import{l as F,w as H,c as J,u as L,a as M,d as N,p as O,b as S,e as B,s as w,f as g,g as n,h as o,i as h,t as y,j as W,k as $,m as q,n as G,o as K}from"./disclose-version-mPVtRhrL.js";import{i as E,e as Q,a as R}from"./each-B6yZeq2V.js";import{f as _,a as m,s as v,d as a,b as U,c as V,e as Y,g as Z}from"./dock_data.svelte-D8xrDy0e.js";function ee(l){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function X(l,c){F(window,["resize"],()=>H(()=>c(window[l])))}function te(l){J===null&&ee(),L(()=>{const c=M(l);if(typeof c=="function")return c})}var ae=_('<div role="link" aria-label="Change Page"><img alt="Illustration"/> <div class="h-full w-full flex flex-col justify-center text-center"><div class="p-6"><p> </p></div> <div class="h-18"></div></div></div>'),ie=_('<div class="h-screen w-full flex flex-col justify-center"><div class="w-full flex justify-center mb-4"><span class="loading loading-ring loading-xl"></span></div> <div class="w-full flex justify-center"><progress class="progress progress-primary w-56"></progress></div></div>'),ne=_('<audio preload="auto"></audio>'),re=_("<main><!> <!></main>");function se(l,c){S(c,!0);let I=g(!0),k=g(0),b=g(0),C=W(()=>n(k)>n(b)?"flex-row":"flex-col");const d=JSON.parse(document.getElementById("pages-data").textContent);let x=g(0);te(async()=>{const t=d.map(e=>new Promise((i,r)=>{const s=new Image;s.src=e.image,s.onload=()=>{B(x),i(e.image)},s.onerror=()=>{B(x),console.log(`Failed to fetch ${e.image}`),i(e.image)}}));await Promise.all(t),await new Promise(e=>setTimeout(e,300)),w(I,!1)});function p(t){if(a.currentIndex>0){let e=document.getElementById(`audio-${a.currentIndex}`);e&&(e.pause(),e.currentTime=0)}if(t.clientX>window.screen.width/4&&a.currentIndex<d.length-1){a.currentIndex++;let e=document.getElementById(`audio-${a.currentIndex}`);e&&a.sound&&e.play()}else t.clientX<window.screen.width/4&&a.currentIndex>0&&a.currentIndex--}var j=re(),P=o(j);{var z=t=>{var e=ae();e.__click=p,e.__keyup=A=>A.key==="ArrowLeft"?p({clientX:0}):p({clientX:1e4});var i=o(e),r=h(i,2),s=o(r),f=o(s),u=o(f);y(()=>{v(e,"tabindex",a.currentIndex),U(e,1,V(["h-screen flex",n(C)])),v(i,"src",d[a.currentIndex].image),$(u,d[a.currentIndex].text)}),m(t,e)},D=t=>{var e=ie(),i=h(o(e),2),r=o(i);y(()=>{Y(r,n(x)),v(r,"max",d.length)}),m(t,e)};E(P,t=>{n(I)?t(D,!1):t(z)})}var T=h(P,2);Q(T,17,()=>d,R,(t,e)=>{var i=Z(),r=q(i);{var s=f=>{var u=ne();y(()=>{v(u,"id",n(e).audio.id),v(u,"src",n(e).audio.url)}),G("ended",u,()=>{a.autoplay&&p({clientX:1e4})}),m(f,u)};E(r,f=>{n(e).audio&&f(s)})}m(t,i)}),X("innerWidth",t=>w(k,t,!0)),X("innerHeight",t=>w(b,t,!0)),m(l,j),O()}N(["click","keyup"]);K(se,{target:document.getElementById("book_detail")});
