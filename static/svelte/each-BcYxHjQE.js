import{A as N,B,C as S,D,k as I,F as M,G,H as U,j as q,E as J,g as V,I as K,J as L,K as w,L as O,M as Q,O as X,P as W,Q as Y,R as x,S as Z,T as $,U as H,V as y}from"./disclose-version-C217dOyM.js";class j{anchor;#r=new Map;#f=new Map;#e=new Map;#n=new Set;#s=!0;constructor(f,n=!0){this.anchor=f,this.#s=n}#t=()=>{var f=N;if(this.#r.has(f)){var n=this.#r.get(f),a=this.#f.get(n);if(a)B(a),this.#n.delete(n);else{var u=this.#e.get(n);u&&(this.#f.set(n,u.effect),this.#e.delete(n),u.fragment.lastChild.remove(),this.anchor.before(u.fragment),a=u.effect)}for(const[i,l]of this.#r){if(this.#r.delete(i),i===f)break;const e=this.#e.get(l);e&&(S(e.effect),this.#e.delete(l))}for(const[i,l]of this.#f){if(i===n||this.#n.has(i))continue;const e=()=>{if(Array.from(this.#r.values()).includes(i)){var o=document.createDocumentFragment();G(l,o),o.append(I()),this.#e.set(i,{effect:l,fragment:o})}else S(l);this.#n.delete(i),this.#f.delete(i)};this.#s||!a?(this.#n.add(i),D(l,e,!1)):e()}}};#i=f=>{this.#r.delete(f);const n=Array.from(this.#r.values());for(const[a,u]of this.#e)n.includes(a)||(S(u.effect),this.#e.delete(a))};ensure(f,n){var a=N,u=U();if(n&&!this.#f.has(f)&&!this.#e.has(f))if(u){var i=document.createDocumentFragment(),l=I();i.append(l),this.#e.set(f,{effect:M(()=>n(l)),fragment:i})}else this.#f.set(f,M(()=>n(this.anchor)));if(this.#r.set(a,f),u){for(const[e,t]of this.#f)e===f?a.skipped_effects.delete(t):a.skipped_effects.add(t);for(const[e,t]of this.#e)e===f?a.skipped_effects.delete(t.effect):a.skipped_effects.add(t.effect);a.oncommit(this.#t),a.ondiscard(this.#i)}else this.#t()}}function se(r,f,n=!1){var a=new j(r),u=n?J:0;function i(l,e){a.ensure(l,e)}q(()=>{var l=!1;f((e,t=!0)=>{l=!0,i(t,e)}),l||i(!1,null)},u)}function te(r,f){return f}function ee(r,f,n){for(var a=[],u=f.length,i,l=f.length,e=0;e<u;e++){let h=f[e];D(h,()=>{if(i){if(i.pending.delete(h),i.done.add(h),i.pending.size===0){var E=r.outrogroups;z(H(i.done)),E.delete(i),E.size===0&&(r.outrogroups=null)}}else l-=1},!1)}if(l===0){var t=a.length===0&&n!==null;if(t){var o=n,c=o.parentNode;$(c),c.append(o),r.items.clear()}z(f,!t)}else i={pending:new Set(f),done:new Set},(r.outrogroups??=new Set).add(i)}function z(r,f=!0){for(var n=0;n<r.length;n++)S(r[n],f)}var P;function ie(r,f,n,a,u,i=null){var l=r,e=new Map,t=null,o=K(()=>{var d=n();return y(d)?d:d==null?[]:H(d)}),c,h=!0;function E(){s.fallback=t,re(s,c,l,f,a),t!==null&&(c.length===0?(t.f&w)===0?B(t):(t.f^=w,C(t,null,l)):D(t,()=>{t=null}))}var F=q(()=>{c=V(o);for(var d=c.length,T=new Set,g=N,v=U(),_=0;_<d;_+=1){var A=c[_],m=a(A,_),p=h?null:e.get(m);p?(p.v&&L(p.v,A),p.i&&L(p.i,_),v&&g.skipped_effects.delete(p.e)):(p=fe(e,h?l:P??=I(),A,m,_,u,f,n),h||(p.e.f|=w),e.set(m,p)),T.add(m)}if(d===0&&i&&!t&&(h?t=M(()=>i(l)):(t=M(()=>i(P??=I())),t.f|=w)),!h)if(v){for(const[R,b]of e)T.has(R)||g.skipped_effects.add(b.e);g.oncommit(E),g.ondiscard(()=>{})}else E();V(o)}),s={effect:F,items:e,outrogroups:null,fallback:t};h=!1}function re(r,f,n,a,u){var i=f.length,l=r.items,e=r.effect.first,t,o=null,c=[],h=[],E,F,s,d;for(d=0;d<i;d+=1){if(E=f[d],F=u(E,d),s=l.get(F).e,r.outrogroups!==null)for(const b of r.outrogroups)b.pending.delete(s),b.done.delete(s);if((s.f&w)!==0)if(s.f^=w,s===e)C(s,null,n);else{var T=o?o.next:e;s===r.effect.last&&(r.effect.last=s.prev),s.prev&&(s.prev.next=s.next),s.next&&(s.next.prev=s.prev),k(r,o,s),k(r,s,T),C(s,T,n),o=s,c=[],h=[],e=o.next;continue}if((s.f&x)!==0&&B(s),s!==e){if(t!==void 0&&t.has(s)){if(c.length<h.length){var g=h[0],v;o=g.prev;var _=c[0],A=c[c.length-1];for(v=0;v<c.length;v+=1)C(c[v],g,n);for(v=0;v<h.length;v+=1)t.delete(h[v]);k(r,_.prev,A.next),k(r,o,_),k(r,A,g),e=g,o=A,d-=1,c=[],h=[]}else t.delete(s),C(s,e,n),k(r,s.prev,s.next),k(r,s,o===null?r.effect.first:o.next),k(r,o,s),o=s;continue}for(c=[],h=[];e!==null&&e!==s;)(t??=new Set).add(e),h.push(e),e=e.next;if(e===null)continue}(s.f&w)===0&&c.push(s),o=s,e=s.next}if(r.outrogroups!==null){for(const b of r.outrogroups)b.pending.size===0&&(z(H(b.done)),r.outrogroups?.delete(b));r.outrogroups.size===0&&(r.outrogroups=null)}if(e!==null||t!==void 0){var m=[];if(t!==void 0)for(s of t)(s.f&x)===0&&m.push(s);for(;e!==null;)(e.f&x)===0&&e!==r.fallback&&m.push(e),e=e.next;var p=m.length;if(p>0){var R=null;ee(r,m,R)}}}function fe(r,f,n,a,u,i,l,e){var t=(l&X)!==0?(l&W)===0?Q(n,!1,!1):O(n):null,o=(l&Y)!==0?O(u):null;return{v:t,i:o,e:M(()=>(i(f,t??n,o??u,e),()=>{r.delete(a)}))}}function C(r,f,n){if(r.nodes)for(var a=r.nodes.start,u=r.nodes.end,i=f&&(f.f&w)===0?f.nodes.start:n;a!==null;){var l=Z(a);if(i.before(a),a===u)return;a=l}}function k(r,f,n){f===null?r.effect.first=n:f.next=n,n===null?r.effect.last=f:n.prev=f}export{j as B,se as a,ie as e,te as i};
