const T="none";function _(t){return Array.isArray(t)?t:[t]}function v(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}function U(t,e){return e.filter(n=>t.pointerId!==n.pointerId)}function S(t,e){const n=t.getBoundingClientRect();return{x:Math.round(e.clientX-n.left),y:Math.round(e.clientY-n.top)}}function H(t,e,n){const{x:c,y:o}=S(t,e);return{event:e,pointersCount:n.length,target:e.target,x:c,y:o,attachmentNode:t}}function w(t,e,n,c,o){const s=H(t,n,c);return t.dispatchEvent(new CustomEvent(`${e}${o}`,{detail:s})),s}function M(){let t=[],e=()=>{},n=[];return{setPointerControls:(c,o,s,u,h,m=T,a=[])=>(o.style.touchAction=_(m).join(" "),n=a,n.forEach(i=>{i.onInit?.(t)}),t.length||(e=v(o,"pointerdown",function(p){t.push(p);const D=w(o,c,p,t,"down");u?.(t,p),setTimeout(()=>{n.forEach(r=>{r.onDown?.(D,t)})});function l(r){const A=t.length;if(t=U(r,t),A>t.length){t.length||E();const C=w(o,c,r,t,"up");h?.(t,r),setTimeout(()=>{n.forEach(L=>{L.onUp?.(C,t)})})}}function E(){f(),y(),I(),P()}const f=v(o,"pointermove",r=>{t=t.map(d=>r.pointerId===d.pointerId?r:d);const A=w(o,c,r,t,"move");s?.(t,r),n.forEach(d=>{d.onMove?.(A,t)})}),y=v(o,"lostpointercapture",r=>{l(r)}),I=v(o,"pointerup",r=>{l(r)}),P=v(o,"pointerleave",r=>{l(r)})})),{destroy:()=>{t.length||(e(),n.forEach(i=>{i.onDestroy?.()}))}})}}const N="@attach";function Y(){return Symbol(N)}const g="swipe";function F(t,e,n,c=!1){const{setPointerControls:o}=M(),s=c?g:Y();return{...n,[`on${g}`]:t,[s]:u=>{const{onDown:h,onUp:m,parameters:a}=b(u,e?.());return o(g,u,null,h,m,a.touchAction,a.plugins).destroy}}}function b(t,e){const n={timeframe:300,minSwipeDistance:60,touchAction:T,composed:!1,...e};let c,o,s,u;function h(a,i){o=i.clientX,s=i.clientY,c=Date.now(),a.length===1&&(u=i.target)}function m(a,i){if(i.type==="pointerup"&&a.length===0&&Date.now()-c<n.timeframe){const p=i.clientX-o,D=i.clientY-s,l=Math.abs(p),E=Math.abs(D);let f=null;l>=2*E&&l>n.minSwipeDistance?f=p>0?"right":"left":E>=2*l&&E>n.minSwipeDistance&&(f=D>0?"bottom":"top"),f&&t.dispatchEvent(new CustomEvent(g,{detail:{direction:f,target:u,pointerType:i.pointerType}}))}}return{onDown:h,onUp:m,parameters:n}}export{F as u};
